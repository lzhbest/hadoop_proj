CREATE TABLE IF NOT EXISTS dc_risk.event_env_dev (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `event_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '事件类型',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `longitude` float(10,6) NOT NULL DEFAULT 0 COMMENT 'GPS经度',
  `latitude` float(10,6) NOT NULL DEFAULT 0 COMMENT 'GPS维度',
  `pvc` varchar(50) NOT NULL DEFAULT '' COMMENT '经纬度转换：省',
  `cty` varchar(50) NOT NULL DEFAULT '' COMMENT '经纬度转换：市',
  `tmn_opr_sys_typ` tinyint(4) NOT NULL DEFAULT 0 COMMENT '终端系统类型',
  `screen_state` tinyint(4) NOT NULL DEFAULT 0 COMMENT '屏幕方向：竖屏1，横屏0',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1 (`usr_id`),
  KEY idx2(`ip`),
  KEY idx3(`eqp_id`)
);


CREATE TABLE IF NOT EXISTS dc_risk.event_register (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `usr_nm` varchar(20) NOT NULL DEFAULT '' COMMENT '用户名',
  `id_card_nbr` varchar(50) NOT NULL DEFAULT '' COMMENT '身份证号',
  `mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '注册手机号',
  `wthr_suc` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否成功，1：成功，2：失败',
  `reg_tm` datetime NOT NULL COMMENT '注册时间',
  `alipay_adr` varchar(1000) NOT NULL DEFAULT '' COMMENT '支付宝地址',
  `rcm_psn_id`  varchar(20) NOT NULL DEFAULT '' COMMENT '推荐人编号',
  `platform_api`  varchar(20) NOT NULL DEFAULT '' COMMENT '平台标识',
  `xy_reg_tm`  datetime NOT NULL COMMENT '享宇注册时间',
  `chnl_hbr_1` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级1',
  `chnl_hbr_2` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级2',
  `chnl_hbr_3` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级3',
  `chnl_hbr_4` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级4',
  `chnl_hbr_5` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级5',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1(`usr_id`),
  KEY idx2(`eqp_id`),
  KEY idx3(`ip`),
  KEY idx4(`mbl_nbr`),
  KEY dtx1(`reg_tm`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_user_login (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '登录手机号',
  `lgn_tm` datetime NOT NULL COMMENT '登录时间',
  `lgn_wthr_suc` tinyint(4) NOT NULL DEFAULT 0 COMMENT '登录是否成功，1：成功，2：失败',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1 (`mbl_nbr`),
  KEY idx2(`eqp_id`),
  KEY idx3(`ip`),
  KEY dtx1(`lgn_tm`)
);

CREATE TABLE IF NOT EXISTS dc_risk.login_env_dev (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '登录手机号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `longitude` float(10,6) NOT NULL DEFAULT 0 COMMENT 'GPS经度',
  `latitude` float(10,6) NOT NULL DEFAULT 0 COMMENT 'GPS维度',
  `pvc` varchar(50) NOT NULL DEFAULT '' COMMENT '经纬度转换：省',
  `cty` varchar(50) NOT NULL DEFAULT '' COMMENT '经纬度转换：市',
  `tmn_opr_sys_typ` tinyint(4) NOT NULL DEFAULT 0 COMMENT '终端系统类型',
  `screen_state` tinyint(4) NOT NULL DEFAULT 0 COMMENT '屏幕方向：竖屏1，横屏0',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1 (`mbl_nbr`),
  KEY idx2(`ip`),
  KEY idx3(`eqp_id`)
) ;

CREATE TABLE IF NOT EXISTS dc_risk.event_usr_mdf_psw (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `psw_type` tinyint(20) NOT NULL DEFAULT 0 COMMENT '密码类型：登录1，其他密码2',
  `mdf_tm` datetime NOT NULL COMMENT '密码修改时间',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  `ip`     varchar(20)      not null default '' COMMENT 'IP地址',
  `eqp_id`     varchar(50)      not null default '' COMMENT '设备编号',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk1` (`stream_uuid`),
  KEY `idx1` (`usr_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_ocr_id_card (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT '姓名',
  `idcard` varchar(50) NOT NULL DEFAULT '' COMMENT '身份证号',
  `address` varchar(200) NOT NULL DEFAULT '' COMMENT '户籍地址',
  `doc_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '验证类型',
  `idcard_front` varchar(200) NOT NULL DEFAULT '' COMMENT '身份证正面图片路径',
  `id_img_frt_typ` tinyint(4) NOT NULL DEFAULT '0' COMMENT '正面类型',
  `idcard_reverse` varchar(200) NOT NULL DEFAULT '' COMMENT '身份证反面图片路径',
  `idcard_reverse_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '反面类型',
  `doc_begin` date NOT NULL COMMENT '发证日期',
  `doc_end` date NOT NULL COMMENT '过期日期',
  `stream_uuid` varchar(50) NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deleted` tinyint(4) NOT NULL DEFAULT '0',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk1` (`stream_uuid`),
  KEY `idx2` (`idcard`)
);

CREATE TABLE IF NOT EXISTS dc_risk.semsetime_verify (
  `idNo` varchar(50) NOT NULL DEFAULT '' COMMENT '身份证号',
  `userName` varchar(20) NOT NULL DEFAULT '' COMMENT '用户名',
  `imgPath` varchar(1000) NOT NULL DEFAULT '' COMMENT '图片路径',
  `imgPath1` varchar(1000) NOT NULL DEFAULT '' COMMENT '图片路径1',
  `requestId` varchar(50) NOT NULL DEFAULT '' COMMENT '请求编号',
  `code` tinyint(4) NOT NULL DEFAULT 0 COMMENT '系统响应码 正常1000',
  `verificationScore` float NOT NULL DEFAULT 0 COMMENT '人脸识别得分',
  `finalResult` tinyint(4) NOT NULL DEFAULT 0 COMMENT '人脸识别结果 1成功,2失败',
  `message` varchar(100) NOT NULL DEFAULT '' COMMENT '提示信息',
  `livenessId` varchar(100) NOT NULL DEFAULT '' COMMENT '回响度',
  `orginData` varchar(100) NOT NULL DEFAULT '' COMMENT '原始数据',
  `url` varchar(100) NOT NULL DEFAULT '' COMMENT '调用的接口url',
  `stream_uuid` varchar(50) NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `deleted` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idNo`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_client_relation (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `id_card_nbr` varchar(50) NOT NULL DEFAULT '' COMMENT '身份证号',
  `email` varchar(100) NOT NULL DEFAULT '' COMMENT '电子邮箱',
  `address` varchar(200) NOT NULL DEFAULT '' COMMENT '常驻地址',
  `alive_body` varchar(10) NOT NULL DEFAULT '' COMMENT '活体',
  `alive_body_time` datetime NOT NULL COMMENT '活体标志时间',
  `sec_bank_card_no` varchar(50) NOT NULL DEFAULT '' COMMENT '副卡卡号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `stream_uuid` varchar(50) NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk1` (`stream_uuid`),
  KEY `idx1` (`usr_id`),
  KEY `idx2` (`id_card_nbr`)
);

CREATE TABLE IF NOT EXISTS dc_risk.relation_ctc(
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `ctc_mbl_nbr` varchar(20) not null default "" comment '联系人号码',
  `ctc_mbl_nbr_sec` varchar(20) not null default "" comment '第二联系人号码',
 `relation_type` varchar(10) not null default "" comment '联系人关系',
 `relation_type_sec` varchar(10) not null default "" comment '第二联系人关系',
 `ctc_nm` varchar(50) not null default "" comment '联系人姓名',
    `ctc_nm_sec` varchar(20) not null default "" comment '第二联系人姓名',
 `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
   PRIMARY KEY (`id`),
 UNIQUE KEY uk1 (`stream_uuid`),
  KEY `idx1` (`usr_id`),
  KEY `idx2` (`ctc_mbl_nbr`)
);

CREATE TABLE IF NOT EXISTS dc_risk.relation_cmp_adr(
 `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
 `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
   `cmp_nm` varchar(100) not null default "" comment '单位名称',
   `cmp_adr` varchar(200) NOT NULL DEFAULT '' COMMENT '公司地址',
  `ofc_nbr` varchar(50) not null default "" comment '单位电话',
  `profession` varchar(100) not null default "" comment '职位信息',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
   PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
   KEY `idx1` (`usr_id`),
  KEY `idx2` (`cmp_nm`),
  KEY `idx3` (`ofc_nbr`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_insu_plcy_loan (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `insu_plcy_loan_eft_dt` datetime NOT NULL COMMENT '保单贷生效日期',
  `insu_plcy_loan_cmp_nm` varchar(100) NOT NULL DEFAULT '' COMMENT '保单贷保险公司名称',
  `insu_plcy_loan_bred` varchar(10) NOT NULL DEFAULT '' COMMENT '保单贷险种',
  `insu_plcy_loan_pay_mth` varchar(20) NOT NULL DEFAULT '' COMMENT '保单贷缴费方式',
  `insu_plcy_loan_pay_trm` varchar(10) NOT NULL DEFAULT '' COMMENT '保单贷缴费期限',
  `insu_plcy_loan_trm_pmt_amt` decimal(10,4) NOT NULL DEFAULT 0 COMMENT '保单贷期缴金额',
  `bdd_cur_state` varchar(10) NOT NULL DEFAULT '' COMMENT '保单当前状态',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`)
) ;

CREATE TABLE IF NOT EXISTS dc_risk.event_credit_apply (
  `crd_apl_id` varchar(20) NOT NULL DEFAULT '' COMMENT '授信申请编号',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `prod_id` varchar(50) NOT NULL DEFAULT '' COMMENT '产品编号',
  `crd_lmt` decimal(10,4) NOT NULL DEFAULT 0 COMMENT '申请授信额度',
  `apl_orig_tm` datetime NOT NULL COMMENT '申请开始时间',
  `apl_end_tm` datetime NOT NULL COMMENT '申请结束时间',
  `apply_state` tinyint(4) NOT NULL DEFAULT 0 COMMENT '授信状态',
  `rfs_cd` varchar(50) NOT NULL DEFAULT '' COMMENT '拒绝代码',
  `mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '手机号',
  `perm_rsd_adr` varchar(200) NOT NULL DEFAULT '' COMMENT '常驻地址',
  `chnl_hbr_1` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级1',
  `chnl_hbr_2` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级2',
  `chnl_hbr_3` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级3',
  `chnl_hbr_4` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级4',
  `chnl_hbr_5` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级5',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`crd_apl_id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1(`usr_id`),
  KEY idx2(`prod_id`),
  KEY idx3 (`eqp_id`),
  KEY idx4 (`ip`),
  KEY dtx1 (`apl_orig_tm`)
) ;

CREATE TABLE IF NOT EXISTS dc_risk.event_card_bind (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `card_nbr` varchar(50) NOT NULL DEFAULT '' COMMENT '卡号',
  `brn_nm` varchar(100) NOT NULL DEFAULT '' COMMENT '支行名称',
  `bind_tm` datetime NOT NULL COMMENT '绑卡时间',
  `bind_suc_tm` datetime NOT NULL COMMENT '绑卡成功时间',
  `rel_mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '关联手机号',
  `card_type` varchar(10) NOT NULL DEFAULT '' COMMENT '银行卡类型',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1(`usr_id`),
  KEY idx2 (`card_nbr`),
  KEY idx3 (`eqp_id`),
  KEY idx4 (`ip`),
  KEY dtx1 (`bind_tm`),
  KEY dtx2 (`bind_suc_tm`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_loan_apply (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `loan_apl_id` varchar(50) NOT NULL DEFAULT '' COMMENT '提现申请编号',
  `crd_apl_id` varchar(50) NOT NULL DEFAULT '' COMMENT '授信申请编号',
  `apl_sbm_tm` datetime NOT NULL COMMENT '申请时间',
  `rvw_tm` datetime NOT NULL COMMENT '审核时间',
  `apply_state` tinyint(4) NOT NULL DEFAULT 0 COMMENT '申请状态',
  `rfs_cd` varchar(10) NOT NULL DEFAULT '' COMMENT '拒绝代码',
  `prod_id` varchar(50) NOT NULL DEFAULT '' COMMENT '产品编号',
  `mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '手机号',
  `brw_usg` varchar(200) NOT NULL DEFAULT '' COMMENT '借款用途',
  `chnl_hbr_1` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级1',
  `chnl_hbr_2` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级2',
  `chnl_hbr_3` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级3',
  `chnl_hbr_4` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级4',
  `chnl_hbr_5` varchar(100) NOT NULL DEFAULT '0' COMMENT '渠道层级5',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1(`usr_id`),
  KEY idx2 (`loan_apl_id`),
  KEY idx3 (`crd_apl_id`),
  KEY idx4 (`prod_id`),
  KEY idx5 (`eqp_id`),
  KEY idx6 (`ip`),
  KEY dtx1 (`apl_sbm_tm`),
  KEY dtx2 (`rvw_tm`)
);

CREATE TABLE IF NOT EXISTS dc_risk.credit_amt (
  `crd_id` varchar(50) NOT NULL DEFAULT '' COMMENT '授信编号',
  `usr_id` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号',
  `prod_id` varchar(50) NOT NULL DEFAULT '' COMMENT '产品编号',
  `prod_no` varchar(50) NOT NULL DEFAULT '' COMMENT '产品序号',
  `prod_nm` varchar(100) NOT NULL DEFAULT '' COMMENT '授信产品名称',
  `crd_lmt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '授信额度',
  `frz_lmt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '冻结额度',
  `used_lmt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '使用额度',
  `tmp_cls_lmt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '暂封额度',
  `credit_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '授信类型',
  `eft_tm` datetime NOT NULL COMMENT '生效时间',
  `nvld_tm` datetime NOT NULL COMMENT '失效时间',
  `wthr_eft` tinyint(4) NOT NULL DEFAULT '0' COMMENT '是否生效',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `stream_uuid` varchar(50) NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `deleted` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`usr_id`,`prod_id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY `idx1` (`crd_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_rpay_pln_upd (
  `usr_id` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号',
  `ctr_id` varchar(50) NOT NULL DEFAULT '' COMMENT '合同编号',
  `loan_invc_id` varchar(50) NOT NULL DEFAULT '' COMMENT '借据编号',
  `prd_nbr` tinyint(4) NOT NULL DEFAULT 0 COMMENT '期次',
  `orig_tm` datetime NOT NULL COMMENT '开始时间',
  `shd_pay_tm` datetime NOT NULL COMMENT '应还时间',
  `late_actl_rpay_tm` datetime NOT NULL COMMENT '最近实还时间',
  `rmn_amt` decimal(10,4) NOT NULL DEFAULT 0 COMMENT '剩余金额',
  `rpay_pln_state` tinyint(4) NOT NULL DEFAULT 0 COMMENT '还款计划状态',
  `grc_tm` datetime NOT NULL COMMENT ' 宽限时间',
  `ovd_day` int(4) NOT NULL DEFAULT 0 COMMENT '逾期天数',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`loan_invc_id`,`prd_nbr`,`usr_id`),
  KEY idx1(`eqp_id`),
  KEY idx2(`ip`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_rpay_srl (
  `rpay_srl` varchar(50) NOT NULL DEFAULT '' COMMENT '还款流水',
  `dtl_no` varchar(50) NOT NULL DEFAULT '' COMMENT '明细号',
  `loan_invc_id` varchar(50) NOT NULL DEFAULT '' COMMENT '借据编号',
  `prd_nbr` tinyint(4) NOT NULL DEFAULT '0' COMMENT '期次',
  `usr_id` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号',
  `rpay_tot_amt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '还款总金额',
  `rpay_state` tinyint(4) NOT NULL DEFAULT '0' COMMENT '还款状态',
  `rpay_oper_type` varchar(5) NOT NULL DEFAULT '' COMMENT '还款操作类型',
  `trx_tm` datetime NOT NULL COMMENT '交易时间',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `stream_uuid` varchar(50) NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `deleted` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`rpay_srl`,`dtl_no`,`loan_invc_id`),
  KEY `idx1` (`usr_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_loan_invoice_lst (
  `loan_invc_id` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '借据编号',
  `usr_id` varchar(20) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '用户编号',
  `prod_id` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '产品编号',
  `prod_no` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '产品编号',
  `ctr_id` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '合同编号',
  `rmn_prcp` decimal(10,4) NOT NULL DEFAULT '0.0000' COMMENT '剩余本金',
  `deal_amt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '处理中金额',
  `rmn_amt` decimal(15,4) NOT NULL DEFAULT '0.0000' COMMENT '剩余金额',
  `loan_invc_state` tinyint(4) NOT NULL DEFAULT '0' COMMENT '借据状态',
  `ini_intr_rat` decimal(6,4) NOT NULL DEFAULT '0.0000' COMMENT '初始利率',
  `exe_intr_rat` decimal(6,4) NOT NULL DEFAULT '0.0000' COMMENT '执行利率',
  `pyf_day` datetime NOT NULL COMMENT '结清日',
  `prod_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '产品类型',
  `prod_nm` varchar(100) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '产品名称',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `ip` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT 'IP地址',
  `eqp_id` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '设备编号',
  `stream_uuid` varchar(50) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `deleted` tinyint(4) NOT NULL DEFAULT '0',
  PRIMARY KEY (`loan_invc_id`),
  KEY `idx1` (`usr_id`),
  KEY `idx2` (`prod_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.variable_history (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增',
  `user_no` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号或手机号，用于标识用户',
  `key_en` varchar(50) NOT NULL DEFAULT '' COMMENT '变量英文名',
  `key_cn` varchar(50) NOT NULL DEFAULT '' COMMENT '变量中文名',
  `var_value` varchar(20) NOT NULL DEFAULT '' COMMENT '变量值',
  `stream_uuid` varchar(100) NOT NULL DEFAULT '' COMMENT '作业号(事件消费过来的第一时间生成一个序列号，用于追踪变量来自哪条事件)',
  `job_name` varchar(100) NOT NULL DEFAULT '' COMMENT '作业名(本表的字段来自哪个类，多个用","隔开)',
  `receive_time` bigint(20) NOT NULL DEFAULT 0 COMMENT '事件接收时间(可表示开始计算的时间)',
  `elapsed_time` float NOT NULL DEFAULT 0 COMMENT '此变量计算耗时单位毫秒',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`id`),
  KEY `_id` (`user_no`,`key_en`)
) ;

CREATE TABLE IF NOT EXISTS dc_risk.event_eqp_fingerprints (
  `usr_id` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号或手机号，用于标识用户',
  `event_type` tinyint(4) NOT NULL DEFAULT '0' COMMENT '事件类型',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_fingerprints` blob NOT NULL COMMENT '设备指纹',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`stream_uuid`),
  KEY idx1(`usr_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.env_eqp_fingerprints(
  `usr_id` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号或手机号，用于标识用户',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_fingerprints` blob NOT NULL COMMENT '设备指纹',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`stream_uuid`),
  KEY idx1(`usr_id`,`eqp_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.login_eqp_fingerprints (
  `mbl_nbr` varchar(50) NOT NULL DEFAULT '' COMMENT '用户编号或手机号，用于标识用户',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_fingerprints` blob NOT NULL COMMENT '设备指纹',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`stream_uuid`),
  KEY idx1(`mbl_nbr`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_user_info (
  `usr_id` varchar(20) NOT NULL DEFAULT '' COMMENT '用户编号',
  `id_card_nbr` varchar(50) NOT NULL DEFAULT '' COMMENT '身份证号',
  `doc_vld_prd` datetime NOT NULL COMMENT '证件有效期',
  `nm` varchar(20) NOT NULL DEFAULT '' COMMENT '姓名',
  `gdr` varchar(10) NOT NULL DEFAULT '' COMMENT '性别',
  `acdm_deg` varchar(20) NOT NULL DEFAULT '' COMMENT '学历',
  `ocp` varchar(200) NOT NULL DEFAULT '' COMMENT '职业',
  `id_card_front` varchar(1000) NOT NULL DEFAULT '' COMMENT '身份证正面照路径',
  `id_card_reverse` varchar(200) NOT NULL DEFAULT '' COMMENT '身份证反面照路径',
  `mbl_nbr` varchar(20) NOT NULL DEFAULT '' COMMENT '手机号',
  `rel_flg` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否实名，1：成功，2：失败',
  `hshld_pvc` varchar(50) NOT NULL DEFAULT '' COMMENT '户籍地省',
  `hshld_cty` varchar(50) NOT NULL DEFAULT '' COMMENT '户籍地市',
  `hshld_adr` varchar(200) NOT NULL DEFAULT '' COMMENT '户籍地址',
  `hshld_adr_splf` varchar(200) NOT NULL DEFAULT '' COMMENT '户籍地址  没有门牌号等数字信息',
  `hshld_pvc_code` varchar(50) NOT NULL DEFAULT '' COMMENT '户籍地省编码',
  `hshld_cty_code` varchar(50) NOT NULL DEFAULT '' COMMENT '户籍地市编码',
  `rsd_pvc` varchar(50) NOT NULL DEFAULT '' COMMENT '常驻地-省',
  `rsd_cty` varchar(50) NOT NULL DEFAULT '' COMMENT '常驻地-市',
  `rsd_adr` varchar(200) NOT NULL DEFAULT '' COMMENT '常驻地址',
  `rsd_pvc_code` varchar(10) NOT NULL DEFAULT '' COMMENT '常驻地-省-编码',
  `rsd_cty_code` varchar(10) NOT NULL DEFAULT '' COMMENT '常驻地-市-编码',
  `rsd_adr_splf` varchar(200) NOT NULL DEFAULT '' COMMENT '常驻地地址  没有门牌号等数字信息',
  `stream_uuid` varchar(50)  NOT NULL DEFAULT '' COMMENT '数据签名，数据唯一性',
  `eqp_id` varchar(50) NOT NULL DEFAULT '' COMMENT '设备编号',
  `ip` varchar(50) NOT NULL DEFAULT '' COMMENT 'IP地址',
  `created`     timestamp    not null default current_timestamp,
  `updated`     timestamp    not null default current_timestamp on update current_timestamp,
  `deleted`     tinyint      not null default 0,
  PRIMARY KEY (`usr_id`),
  UNIQUE KEY uk1 (`stream_uuid`),
  KEY idx1(`id_card_nbr`),
  KEY idx2(`eqp_id`),
  KEY idx3(`ip`),
  KEY adr1(`hshld_adr_splf`),
  KEY adr2(`rsd_adr_splf`)
);

CREATE TABLE IF NOT EXISTS dc_risk.bolt_cfg (
  `bolt_id` varchar(50) NOT NULL DEFAULT '' COMMENT 'Bolt编号',
  `timeout_thrs` bigint(20) NOT NULL DEFAULT '0' COMMENT '超时阈值,单位毫秒',
  `warning_window` smallint(6) NOT NULL DEFAULT '0' COMMENT '时间窗口内只报警一次，单位分',
  `topology_id` varchar(50) NOT NULL DEFAULT '' COMMENT '拓扑编号',
  `fail_ratio_thrs` float NOT NULL DEFAULT '0' COMMENT '失败比率，即一个变量计算逻辑Bolt中，每条事件计算失败的变量占比阈值',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`bolt_id`,`topology_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.var_cfg (
  `bolt_id` varchar(50) NOT NULL DEFAULT '' COMMENT 'Bolt编号',
  `var_id` varchar(50) NOT NULL DEFAULT '' COMMENT '变量编号',
  `state` tinyint(4) NOT NULL DEFAULT '0' COMMENT '变量状态（1:正常;2:下架）',
  `aviator_rule` varchar(2000) NOT NULL DEFAULT '' COMMENT '变量计算规则',
  `timeout_thrs` bigint(20) NOT NULL DEFAULT '0' COMMENT '超时阈值,单位毫秒',
  `warning_window` smallint(6) NOT NULL DEFAULT '0' COMMENT '时间窗口内只报警一次，单位分',
  `cal_rank` int(11) NOT NULL DEFAULT '0' COMMENT '变量计算优先级(越小等级越高)',
  `remark` varchar(100) NOT NULL DEFAULT '' COMMENT '变量备注（一般变量中文解释）',
  `expire` int(11) NOT NULL DEFAULT '0' COMMENT '变量在Redis的缓存时间，单位毫秒',
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`bolt_id`,`var_id`)
);

CREATE TABLE IF NOT EXISTS dc_risk.event_monitor (
  `stream_uuid` varchar(100) NOT NULL DEFAULT '' COMMENT '事件编号',
  `receive_time` bigint(20) NOT NULL DEFAULT 0 COMMENT '事件接收时间',
  `finish_time` bigint(20) NOT NULL DEFAULT 0 COMMENT '事件完成时间',
  `elapsed_time` int(11) NOT NULL DEFAULT 0 COMMENT '事件计算耗时，单位毫秒',
  `var_avg_time` float NOT NULL DEFAULT 0 COMMENT '变量计算平均耗时，单位毫秒',
  `var_count` SMALLINT NOT NULL DEFAULT 0 COMMENT '变量计算个数',
  PRIMARY KEY (`stream_uuid`),
  KEY `rt` (`receive_time`),
  KEY `ft` (`finish_time`),
  KEY `et` (`elapsed_time`),
  KEY `at` (`var_avg_time`),
  KEY `vc` (`var_count`)
);
